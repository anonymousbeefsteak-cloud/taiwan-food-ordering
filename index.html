<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>台灣小吃店 - LINE 快速訂餐</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #f7fafc;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 18px;
            color: #666;
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading">
            ⏳ 載入訂餐功能中...
        </div>
    </div>

    <!-- 載入 React 和相關庫 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

    <script type="text/babel">
        // 簡單的菜單資料
        const menuItems = [
            { name: '滷肉飯', price: 35, icon: '🍚' },
            { name: '雞肉飯', price: 40, icon: '🍗' },
            { name: '蚵仔煎', price: 65, icon: '🍳' },
            { name: '大腸麵線', price: 50, icon: '🍜' },
            { name: '珍珠奶茶', price: 45, icon: '🥤' }
        ];

        // 簡單的訂餐組件
        const SimpleOrderApp = () => {
            const [cart, setCart] = React.useState([]);
            const [customerName, setCustomerName] = React.useState('');
            const [customerPhone, setCustomerPhone] = React.useState('');

            const addToCart = (item) => {
                setCart(prev => {
                    const existing = prev.find(i => i.name === item.name);
                    if (existing) {
                        return prev.map(i => 
                            i.name === item.name 
                                ? { ...i, quantity: i.quantity + 1 }
                                : i
                        );
                    }
                    return [...prev, { ...item, quantity: 1 }];
                });
            };

            const removeFromCart = (itemName) => {
                setCart(prev => prev.filter(item => item.name !== itemName));
            };

            const getTotal = () => {
                return cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            };

            return React.createElement('div', { className: 'min-h-screen bg-gray-100 p-4' },
                // Header
                React.createElement('div', { className: 'bg-white rounded-2xl shadow-lg mb-4' },
                    React.createElement('div', { className: 'bg-green-500 text-white p-6 rounded-t-2xl text-center' },
                        React.createElement('h1', { className: 'text-2xl font-bold mb-2' }, '🍜 台灣小吃店'),
                        React.createElement('p', { className: 'text-sm opacity-90' }, 'LINE 快速訂餐 - 24小時服務')
                    ),
                    
                    // Customer Info
                    React.createElement('div', { className: 'p-4' },
                        React.createElement('div', { className: 'mb-3' },
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '姓名'),
                            React.createElement('input', {
                                type: 'text',
                                value: customerName,
                                onChange: (e) => setCustomerName(e.target.value),
                                className: 'w-full p-2 border border-gray-300 rounded-lg',
                                placeholder: '請輸入您的姓名'
                            })
                        ),
                        React.createElement('div', { className: 'mb-3' },
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '手機號碼'),
                            React.createElement('input', {
                                type: 'tel',
                                value: customerPhone,
                                onChange: (e) => setCustomerPhone(e.target.value),
                                className: 'w-full p-2 border border-gray-300 rounded-lg',
                                placeholder: '0936123456'
                            })
                        )
                    )
                ),

                // Menu
                React.createElement('div', { className: 'bg-white rounded-2xl shadow-lg mb-4 p-4' },
                    React.createElement('h2', { className: 'text-lg font-bold text-center mb-4' }, '📝 選擇餐點'),
                    React.createElement('div', { className: 'space-y-3' },
                        menuItems.map(item => 
                            React.createElement('div', { 
                                key: item.name,
                                className: 'flex justify-between items-center p-3 border border-gray-200 rounded-lg'
                            },
                                React.createElement('div', null,
                                    React.createElement('h3', { className: 'font-bold' }, `${item.icon} ${item.name}`),
                                    React.createElement('p', { className: 'text-green-600 font-bold' }, `$${item.price}`)
                                ),
                                React.createElement('button', {
                                    onClick: () => addToCart(item),
                                    className: 'bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg'
                                }, '加入')
                            )
                        )
                    )
                ),

                // Cart
                cart.length > 0 && React.createElement('div', { className: 'bg-yellow-50 rounded-2xl shadow-lg mb-4 p-4 border border-yellow-200' },
                    React.createElement('h2', { className: 'text-lg font-bold mb-3' }, '🛒 購物車'),
                    React.createElement('div', { className: 'space-y-2' },
                        cart.map(item =>
                            React.createElement('div', {
                                key: item.name,
                                className: 'flex justify-between items-center'
                            },
                                React.createElement('div', null,
                                    React.createElement('span', { className: 'font-bold' }, `${item.icon} ${item.name}`),
                                    React.createElement('span', { className: 'text-gray-600 ml-2' }, `x${item.quantity}`)
                                ),
                                React.createElement('div', { className: 'flex items-center gap-2' },
                                    React.createElement('span', { className: 'font-bold text-green-600' }, `$${item.price * item.quantity}`),
                                    React.createElement('button', {
                                        onClick: () => removeFromCart(item.name),
                                        className: 'bg-red-500 hover:bg-red-600 text-white w-6 h-6 rounded-full flex items-center justify-center'
                                    }, '×')
                                )
                            )
                        )
                    ),
                    React.createElement('div', { className: 'flex justify-between items-center mt-3 pt-3 border-t border-gray-300' },
                        React.createElement('span', { className: 'font-bold' }, '總金額:'),
                        React.createElement('span', { className: 'text-xl font-bold text-green-600' }, `$${getTotal()}`)
                    )
                ),

                // Order Button
                React.createElement('div', { className: 'text-center' },
                    React.createElement('button', {
                        onClick: () => {
                            if (!customerName || !customerPhone) {
                                alert('請填寫姓名和手機號碼');
                                return;
                            }
                            if (cart.length === 0) {
                                alert('請選擇餐點');
                                return;
                            }
                            alert(`訂單提交成功！\n姓名: ${customerName}\n電話: ${customerPhone}\n總金額: $${getTotal()}`);
                        },
                        className: 'w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-2xl text-lg disabled:bg-gray-400',
                        disabled: cart.length === 0
                    }, cart.length === 0 ? '請選擇餐點' : `✅ 送出訂單 ($${getTotal()})`)
                ),

                // Footer
                React.createElement('div', { className: 'mt-6 text-center text-xs text-gray-500' },
                    React.createElement('p', null, '📍 營業時間: 10:00 - 21:00 | 📞 聯絡電話: 02-1234-5678')
                )
            );
        };

        // 渲染應用
        console.log('開始渲染 React 應用...');
        ReactDOM.render(React.createElement(SimpleOrderApp), document.getElementById('root'));
        console.log('React 應用渲染完成');
    </script>
</body>
</html>
