<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>å°ç£å°åƒåº— - LINE å¿«é€Ÿè¨‚é¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #f7fafc;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .clickable-btn:active {
            transform: scale(0.95);
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="min-h-screen flex items-center justify-center p-4">
            <div class="text-center">
                <div class="text-6xl mb-4">â³</div>
                <p class="text-gray-600">è¼‰å…¥è¨‚é¤åŠŸèƒ½ä¸­...</p>
            </div>
        </div>
    </div>

    <!-- è¼‰å…¥ React å’Œç›¸é—œåº« -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // å®Œæ•´èœå–®è³‡æ–™
        const menuItems = [
            { name: 'æ»·è‚‰é£¯', price: 35, icon: 'ğŸš', status: 'ä¾›æ‡‰ä¸­' },
            { name: 'é›è‚‰é£¯', price: 40, icon: 'ğŸ—', status: 'ä¾›æ‡‰ä¸­' },
            { name: 'èšµä»”ç…', price: 65, icon: 'ğŸ³', status: 'ä¾›æ‡‰ä¸­' },
            { name: 'å¤§è…¸éºµç·š', price: 50, icon: 'ğŸœ', status: 'ä¾›æ‡‰ä¸­' },
            { name: 'çç å¥¶èŒ¶', price: 45, icon: 'ğŸ¥¤', status: 'ä¾›æ‡‰ä¸­' },
            { name: 'ç‰›è‚‰éºµ', price: 120, icon: 'ğŸœ', status: 'ä¾›æ‡‰ä¸­' },
            { name: 'è‡­è±†è…', price: 55, icon: 'ğŸ§†', status: 'ä¾›æ‡‰ä¸­' },
            { name: 'é¹½é…¥é›', price: 60, icon: 'ğŸ—', status: 'ä¾›æ‡‰ä¸­' }
        ];

        // èœå“é …ç›®çµ„ä»¶
        const MenuItem = ({ item, cartQuantity, onUpdateCart }) => {
            return React.createElement('div', { 
                className: 'bg-white rounded-lg p-4 border border-gray-200 shadow-sm mb-3' 
            },
                React.createElement('div', { className: 'flex justify-between items-start mb-3' },
                    React.createElement('div', null,
                        React.createElement('h3', { className: 'font-bold text-gray-800 text-sm' }, 
                            `${item.icon} ${item.name}`
                        ),
                        React.createElement('p', { className: 'text-green-600 font-bold text-sm' }, 
                            `$${item.price}`
                        )
                    ),
                    React.createElement('span', { 
                        className: 'text-xs px-2 py-1 rounded-full bg-green-100 text-green-800'
                    }, item.status)
                ),
                
                React.createElement('div', { className: 'flex items-center gap-3' },
                    React.createElement('button', {
                        onClick: () => onUpdateCart(item.name, -1),
                        disabled: cartQuantity === 0,
                        className: `w-8 h-8 rounded-full flex items-center justify-center text-white font-bold clickable-btn ${
                            cartQuantity === 0 ? 'bg-gray-400 cursor-not-allowed' : 'bg-red-500 hover:bg-red-600'
                        }`
                    }, '-'),
                    
                    React.createElement('span', { 
                        className: 'min-w-8 text-center font-bold text-lg'
                    }, cartQuantity),
                    
                    React.createElement('button', {
                        onClick: () => onUpdateCart(item.name, 1),
                        className: 'w-8 h-8 rounded-full bg-green-500 text-white font-bold hover:bg-green-600 clickable-btn'
                    }, '+'),
                    
                    React.createElement('span', { 
                        className: 'ml-2 text-xs text-gray-500'
                    }, `å°è¨ˆ: $${item.price * cartQuantity}`)
                )
            );
        };

        // ä¸»è¨‚é¤çµ„ä»¶
        const OrderApp = () => {
            const [cart, setCart] = useState([]);
            const [customerName, setCustomerName] = useState('');
            const [customerPhone, setCustomerPhone] = useState('');
            const [pickupTime, setPickupTime] = useState('');
            const [notes, setNotes] = useState('');

            // åˆå§‹åŒ–å–é¤æ™‚é–“
            useEffect(() => {
                const now = new Date();
                now.setMinutes(now.getMinutes() + 30);
                const timeString = now.toTimeString().slice(0, 5);
                setPickupTime(timeString);
            }, []);

            // æ›´æ–°è³¼ç‰©è»Š
            const updateCart = (itemName, change) => {
                setCart(prevCart => {
                    const existingIndex = prevCart.findIndex(item => item.name === itemName);
                    
                    if (existingIndex === -1) {
                        if (change > 0) {
                            const menuItem = menuItems.find(item => item.name === itemName);
                            return menuItem ? [...prevCart, { ...menuItem, quantity: 1 }] : prevCart;
                        }
                        return prevCart;
                    }
                    
                    const newCart = [...prevCart];
                    const currentQuantity = newCart[existingIndex].quantity;
                    const newQuantity = currentQuantity + change;
                    
                    if (newQuantity <= 0) {
                        newCart.splice(existingIndex, 1);
                    } else {
                        newCart[existingIndex] = { ...newCart[existingIndex], quantity: newQuantity };
                    }
                    
                    return newCart;
                });
            };

            // ç²å–å•†å“æ•¸é‡
            const getItemQuantity = (itemName) => {
                const item = cart.find(item => item.name === itemName);
                return item ? item.quantity : 0;
            };

            // æ¸…ç©ºè³¼ç‰©è»Š
            const clearCart = () => {
                if (window.confirm('ç¢ºå®šè¦æ¸…ç©ºè³¼ç‰©è»Šå—ï¼Ÿ')) {
                    setCart([]);
                }
            };

            // è¨ˆç®—ç¸½é‡‘é¡
            const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            const totalAmount = subtotal;

            // ç”Ÿæˆæ™‚é–“é¸é …
            const getTimeOptions = () => {
                const times = [];
                for (let hour = 10; hour <= 21; hour++) {
                    for (let minute = 0; minute < 60; minute += 30) {
                        times.push(`${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`);
                    }
                }
                return times;
            };

            // æäº¤è¨‚å–®
            const handleSubmit = () => {
                if (!customerName.trim()) {
                    alert('è«‹å¡«å¯«å§“å');
                    return;
                }
                if (!/^09\d{8}$/.test(customerPhone)) {
                    alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„10ä½æ‰‹æ©Ÿè™Ÿç¢¼ (09é–‹é ­)');
                    return;
                }
                if (cart.length === 0) {
                    alert('è«‹è‡³å°‘é¸æ“‡ä¸€å€‹é¤é»');
                    return;
                }

                const orderDetails = cart.map(item => 
                    `${item.name} x${item.quantity} = $${item.price * item.quantity}`
                ).join('\n');

                alert(`ğŸ‰ è¨‚å–®æäº¤æˆåŠŸï¼\n\nğŸ‘¤ é¡§å®¢å§“å: ${customerName}\nğŸ“ è¯çµ¡é›»è©±: ${customerPhone}\nâ° å–é¤æ™‚é–“: ${pickupTime}\n\nğŸ“¦ è¨‚å–®å…§å®¹:\n${orderDetails}\n\nğŸ’° ç¸½é‡‘é¡: $${totalAmount}\n\nğŸ“ å–é¤åœ°å€: å°ç£å°åƒåº—\nğŸ“ è¯çµ¡é›»è©±: 02-1234-5678`);
            };

            return React.createElement('div', { className: 'min-h-screen bg-gray-100 p-4' },
                // ä¸»å®¹å™¨
                React.createElement('div', { className: 'container max-w-md mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden' },
                    
                    // é ‚éƒ¨æ©«å¹…
                    React.createElement('div', { className: 'bg-[#fff3cd] border border-[#ffeaa7] rounded-t-2xl p-2.5 text-xs text-center text-[#856404]' },
                        'ğŸ”’ å®‰å…¨è¨‚é¤ç³»çµ± - 24å°æ™‚æ¥å—é è¨‚'
                    ),

                    // æ¨™é ­
                    React.createElement('header', { className: 'bg-green-500 text-white p-5 text-center' },
                        React.createElement('h1', { className: 'text-2xl font-bold mb-1' }, 'ğŸœ å°ç£å°åƒåº—'),
                        React.createElement('p', { className: 'text-sm opacity-90' }, 'LINE å¿«é€Ÿè¨‚é¤ - 24å°æ™‚æœå‹™')
                    ),

                    // ä¸»å…§å®¹
                    React.createElement('main', { className: 'p-5 space-y-4' },
                        
                        // é¡§å®¢è³‡è¨Š
                        React.createElement('div', { className: 'space-y-4' },
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block mb-2 font-bold text-gray-700 text-sm' }, 'å§“å *'),
                                React.createElement('input', {
                                    type: 'text',
                                    value: customerName,
                                    onChange: (e) => setCustomerName(e.target.value),
                                    className: 'w-full p-3 border border-gray-300 rounded-lg text-sm',
                                    placeholder: 'è«‹è¼¸å…¥æ‚¨çš„å§“å'
                                })
                            ),
                            
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block mb-2 font-bold text-gray-700 text-sm' }, 'æ‰‹æ©Ÿè™Ÿç¢¼ *'),
                                React.createElement('input', {
                                    type: 'tel',
                                    value: customerPhone,
                                    onChange: (e) => setCustomerPhone(e.target.value),
                                    className: 'w-full p-3 border border-gray-300 rounded-lg text-sm',
                                    placeholder: '0936123456'
                                })
                            ),
                            
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block mb-2 font-bold text-gray-700 text-sm' }, 'å–é¤æ™‚é–“ *'),
                                React.createElement('select', {
                                    value: pickupTime,
                                    onChange: (e) => setPickupTime(e.target.value),
                                    className: 'w-full p-3 border border-gray-300 rounded-lg text-sm'
                                },
                                    React.createElement('option', { value: '' }, 'è«‹é¸æ“‡å–é¤æ™‚é–“'),
                                    getTimeOptions().map(time => 
                                        React.createElement('option', { key: time, value: time }, time)
                                    )
                                )
                            ),
                            
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block mb-2 font-bold text-gray-700 text-sm' }, 'å‚™è¨» (é¸å¡«)'),
                                React.createElement('textarea', {
                                    value: notes,
                                    onChange: (e) => setNotes(e.target.value),
                                    rows: 2,
                                    className: 'w-full p-3 border border-gray-300 rounded-lg text-sm',
                                    placeholder: 'ä¾‹å¦‚ï¼šä¸è¦é¦™èœã€åŠ è¾£ç­‰'
                                })
                            )
                        ),

                        // èœå–®å€åŸŸ
                        React.createElement('div', { className: 'bg-gray-50 p-4 rounded-lg border border-gray-200' },
                            React.createElement('h2', { className: 'text-center text-lg font-bold text-gray-800 mb-4' }, 'ğŸ“ é¸æ“‡é¤é»'),
                            React.createElement('div', { className: 'space-y-3' },
                                menuItems.map(item => 
                                    React.createElement(MenuItem, {
                                        key: item.name,
                                        item: item,
                                        cartQuantity: getItemQuantity(item.name),
                                        onUpdateCart: updateCart
                                    })
                                )
                            )
                        ),

                        // è³¼ç‰©è»Š
                        cart.length > 0 && React.createElement('div', { className: 'bg-yellow-50 p-4 rounded-lg border border-yellow-200' },
                            React.createElement('div', { className: 'flex justify-between items-center mb-4' },
                                React.createElement('h2', { className: 'text-lg font-bold text-gray-800' }, 
                                    `ğŸ›’ è¨‚å–®æ˜ç´° (${cart.reduce((sum, item) => sum + item.quantity, 0)} é …)`
                                ),
                                React.createElement('button', {
                                    onClick: clearCart,
                                    className: 'text-xs bg-red-100 text-red-600 hover:bg-red-500 hover:text-white font-semibold py-1 px-3 rounded-full clickable-btn'
                                }, 'ğŸ—‘ï¸ æ¸…ç©º')
                            ),
                            
                            React.createElement('div', { className: 'space-y-2' },
                                cart.map(item => 
                                    React.createElement('div', { 
                                        key: item.name,
                                        className: 'flex justify-between items-center py-2 border-b border-gray-200'
                                    },
                                        React.createElement('div', null,
                                            React.createElement('p', { className: 'font-bold text-gray-800 text-sm' }, 
                                                `${item.icon} ${item.name}`
                                            ),
                                            React.createElement('p', { className: 'text-xs text-gray-500' }, 
                                                `$${item.price} x ${item.quantity}`
                                            )
                                        ),
                                        React.createElement('p', { className: 'font-bold text-green-600' }, 
                                            `$${item.price * item.quantity}`
                                        )
                                    )
                                )
                            )
                        ),

                        // é‡‘é¡ç¸½çµ
                        cart.length > 0 && React.createElement('div', { className: 'bg-green-50 p-4 rounded-lg border border-green-200 space-y-2' },
                            React.createElement('div', { className: 'flex justify-between text-sm text-gray-600' },
                                React.createElement('span', null, 'é¤é»ç¸½è¨ˆ:'),
                                React.createElement('span', null, `$${subtotal}`)
                            ),
                            React.createElement('div', { className: 'flex justify-between font-bold text-lg text-gray-800 border-t border-gray-300 pt-3 mt-3' },
                                React.createElement('span', null, 'ç¸½é‡‘é¡:'),
                                React.createElement('span', null, `$${totalAmount}`)
                            )
                        ),

                        // æäº¤æŒ‰éˆ•
                        React.createElement('button', {
                            onClick: handleSubmit,
                            disabled: cart.length === 0,
                            className: `w-full py-3 px-4 rounded-lg text-lg font-bold flex items-center justify-center clickable-btn ${
                                cart.length === 0 
                                    ? 'bg-gray-400 text-gray-200 cursor-not-allowed' 
                                    : 'bg-green-500 hover:bg-green-600 text-white'
                            }`
                        }, cart.length === 0 ? 'è«‹é¸æ“‡é¤é»' : 'âœ… é€å‡ºè¨‚å–®')
                    ),

                    // é å°¾
                    React.createElement('footer', { className: 'bg-gray-100 p-4 text-center text-xs text-gray-500 border-t border-gray-200' },
                        React.createElement('p', null, 'ğŸ“ ç‡Ÿæ¥­æ™‚é–“: 10:00 - 21:00 | ğŸ“ è¯çµ¡é›»è©±: 02-1234-5678')
                    )
                )
            );
        };

        // æ¸²æŸ“æ‡‰ç”¨
        console.log('é–‹å§‹æ¸²æŸ“å®Œæ•´è¨‚é¤æ‡‰ç”¨...');
        ReactDOM.render(React.createElement(OrderApp), document.getElementById('root'));
    </script>
</body>
</html>
