<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>台灣小吃店 - LINE 快速訂餐</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* 您的 CSS 樣式保持不變 */
        body {
            background-color: #f7fafc;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 18px;
            color: #666;
        }
        .error {
            background: #fee;
            color: #c00;
            padding: 20px;
            margin: 20px;
            border-radius: 8px;
            border: 1px solid #fcc;
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading" id="loading">
            ⏳ 載入中...
        </div>
    </div>

    <script>
        // 先檢查關鍵庫是否載入成功
        console.log('檢查依賴庫...');
        console.log('React:', typeof React);
        console.log('ReactDOM:', typeof ReactDOM);
        console.log('Babel:', typeof Babel);
        console.log('LIFF:', typeof liff);
        
        if (typeof React === 'undefined') {
            document.getElementById('loading').innerHTML = 
                '<div class="error">❌ React 載入失敗，請刷新頁面</div>';
        }
    </script>

    <script type="text/babel">
        try {
            console.log('開始執行 React 應用...');
            
            const { useState, useCallback, useEffect, useMemo } = React;

            // 配置 - 從環境變數讀取或使用預設值
            const LIFF_ID = '2008316489-6nMjb0KX';
            const API_ENDPOINT = 'https://script.google.com/macros/s/AKfycbxR1gzQgV1jq8DUhYX8EY0EmA6i2PBnjo_IZJUuwRgj7Ggjgro8Mdbnic7ZdhIIc2B1/exec';
            
            console.log('LIFF_ID:', LIFF_ID);
            console.log('API_ENDPOINT:', API_ENDPOINT);

            // 最簡單的測試組件
            const TestApp = () => {
                const [loaded, setLoaded] = useState(false);
                
                useEffect(() => {
                    console.log('TestApp 載入完成');
                    setLoaded(true);
                }, []);
                
                return React.createElement('div', { 
                    style: { 
                        padding: '20px',
                        background: 'white',
                        margin: '20px',
                        borderRadius: '10px',
                        boxShadow: '0 2px 10px rgba(0,0,0,0.1)'
                    }
                }, 
                    React.createElement('h1', { style: { color: 'green' } }, '✅ 台灣小吃店'),
                    React.createElement('p', null, '網站載入成功！'),
                    React.createElement('button', { 
                        onClick: () => alert('測試按鈕工作正常！'),
                        style: {
                            background: 'green',
                            color: 'white',
                            padding: '10px 20px',
                            border: 'none',
                            borderRadius: '5px',
                            marginTop: '10px'
                        }
                    }, '測試按鈕')
                );
            };

            // 渲染應用
            console.log('準備渲染 React 應用...');
            ReactDOM.render(React.createElement(TestApp), document.getElementById('root'));
            console.log('React 應用渲染完成');
            
        } catch (error) {
            console.error('應用執行錯誤:', error);
            document.getElementById('root').innerHTML = 
                '<div class="error">❌ 應用程式錯誤: ' + error.message + '</div>';
        }
    </script>
</body>
</html>
